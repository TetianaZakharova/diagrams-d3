{"version":3,"file":"static/js/56.e5f755a3.chunk.js","mappings":"0MAKIA,EAAW,IAgBR,IAAMC,EAAc,SAAHC,GAAwB,IAADC,EAAjBC,EAAUF,EAAVE,WAC5BC,GAAwBC,EAAAA,EAAAA,YAAUC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3BI,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GAChBI,GAAYC,EAAAA,EAAAA,WAEhBC,EAAAA,EAAAA,YAAU,WACRH,EAAQN,EACV,GAAG,CAACA,IAGJ,IAAMU,GAAUC,EAAAA,EAAAA,KAAO,MACnBC,GAAQC,EAAAA,EAAAA,KAAaC,EAAAA,KAErBC,GAASC,EAAAA,EAAAA,OACVC,KAAK,CAACrB,EAAUA,IAChBsB,QAAQ,KAqEX,OAnEAT,EAAAA,EAAAA,YAAU,YAKRU,EAAAA,EAAAA,IAAO,gBAAgBC,UAAU,OAAOC,SAIxC,IAAMC,GAAMH,EAAAA,EAAAA,IAAO,gBAAgBI,OAAO,OACvCC,KAAK,QAAS5B,GACd4B,KAAK,SAAU5B,KACf6B,MA2BH,SAAsBH,GAEpB,IAAMI,GAAYP,EAAAA,EAAAA,IAAOG,EAAIK,OAAOC,YAClCC,EAAQC,SAASR,EAAIS,MAAM,UAC3BC,EAASF,SAASR,EAAIS,MAAM,WAC5BE,EAASJ,EAAQG,EAanB,SAASE,IACP,IAAMC,EAAcL,SAASJ,EAAUK,MAAM,UAC7CT,EAAIE,KAAK,QAASW,GAClBb,EAAIE,KAAK,SAAUY,KAAKC,MAAMF,EAAcF,GAC9C,CAXAX,EAAIE,KAAK,UAAW,OAASK,EAAT,QACjBL,KAAK,sBAAuB,YAC5BC,KAAKS,IAERf,EAAAA,EAAAA,IAAOmB,QAAQC,GAAG,UAAYb,EAAUF,KAAK,MAAOU,EAQtD,IAjDGV,KAAK,QAAS,UAEXgB,GAAOC,EAAAA,EAAAA,KA3CjB,SAAiBD,GACf,IAAIE,EAAU,GAQd,OANA,SAASC,EAAQC,EAAMjB,GACb,OAAJA,QAAI,IAAJA,GAAAA,EAAMkB,SAAc,OAAJlB,QAAI,IAAJA,GAAAA,EAAMkB,SAASC,SAAQ,SAAUC,GAASJ,EAAY,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,KAAMG,EAAQ,IACrFL,EAAQM,KAAK,CAAEC,YAAaL,EAAMM,UAAe,OAAJvB,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,KAAMO,MAAW,OAAJxB,QAAI,IAAJA,OAAI,EAAJA,EAAMV,MAC7E,CAEA0B,CAAQ,KAAMH,GACP,CAAEK,SAAUH,EACrB,CAiC2BA,CAAQrC,IAC5B+C,KAAI,SAAUC,GAAK,OAAQ,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGF,KAAO,IACpCG,MAAK,SAAUC,EAAGC,GAAK,OAAQ,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGL,QAAS,OAADI,QAAC,IAADA,OAAC,EAADA,EAAGJ,MAAO,IACtDpC,EAAOyB,GACP,IAAMb,EAAOL,EAAIF,UAAU,SACxBf,KAAS,OAAJmC,QAAI,IAAJA,OAAI,EAAJA,EAAMK,UACXY,QAAQlC,OAAO,KACfC,KAAK,QAAS,QACdA,KAAK,aAAa,SAAU6B,GAAK,MAAO,aAAeA,EAAEK,EAAI,IAAML,EAAEM,EAAI,GAAK,IACjFhC,EAAKJ,OAAO,SACTqC,MAAK,SAAUP,GAAI,IAADQ,EAAE,OAAQ,OAADR,QAAC,IAADA,GAAO,QAANQ,EAADR,EAAGhD,YAAI,IAAAwD,OAAN,EAADA,EAASX,WAAY,KAAOxC,EAAS,OAAD2C,QAAC,IAADA,OAAC,EAADA,EAAGF,MAAQ,IAC7ExB,EAAKJ,OAAO,UACTC,KAAK,KAAK,SAAU6B,GAAK,OAAOA,EAAES,CAAG,IACrC/B,MAAM,QAAQ,SAAUsB,GAAI,IAADU,EAC1B,OAAOnD,EAAO,OAADyC,QAAC,IAADA,GAAO,QAANU,EAADV,EAAGhD,YAAI,IAAA0D,OAAN,EAADA,EAASd,YACxB,IACFtB,EAAKJ,OAAO,QACTC,KAAK,KAAM,QACXA,KAAK,cAAe,UACpBO,MAAM,YAAa,QACnB6B,MAAK,SAAUP,GAAI,IAADW,EAAAC,EAAE,OAAQ,OAADZ,QAAC,IAADA,GAAO,QAANW,EAADX,EAAGhD,YAAI,IAAA2D,GAAW,QAAXC,EAAPD,EAASd,iBAAS,IAAAe,OAAjB,EAADA,EAAoBC,UAAU,GAAI,OAADb,QAAC,IAADA,OAAC,EAADA,EAAGS,GAAI,EAAI,GA6B5E,GAAG,EAAK,OAAJzD,QAAI,IAAJA,GAAc,QAAVN,EAAJM,EAAMwC,gBAAQ,IAAA9C,OAAV,EAAJA,EAAgBoE,SAAU,KAI5BC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAxB,UAEIuB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,+BAA8BL,UAC3CuB,EAAAA,EAAAA,KAAA,OACEE,GAAG,cACHpB,UAAU,2BACVqB,IAAKhE,OAOjB,C","sources":["diagrams/bubbleChart/BubbleChartD3.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport { format, pack, schemeCategory10, hierarchy, selectAll, scaleOrdinal, scaleSqrt, schemeSet1, select, forceSimulation, forceCenter, forceCollide, forceX, forceY } from \"d3\"\n\n// const width = 490;\n// const height = 490;\nlet diameter = 490;\n// const centerX = width / 2;\n// const centerY = height / 2;\n\nfunction classes(root) {\n  let classes = [];\n\n  function recurse(name, node) {\n    if (node?.children) node?.children.forEach(function (child) { recurse(node?.name, child); });\n    else classes.push({ packageName: name, className: node?.name, value: node?.size });\n  }\n\n  recurse(null, root);\n  return { children: classes };\n}\n\nexport const BubbleChart = ({ sourceData }) => {\n  const [data, setData] = useState()\n  let bubbleRef = useRef();\n\n  useEffect(() => {\n    setData(sourceData);\n  }, [sourceData])\n  // console.log('data', data)\n\n  const format2 = format(\",d\");\n  let color = scaleOrdinal(schemeCategory10);\n\n  let bubble = pack()\n    .size([diameter, diameter])\n    .padding(1.5);\n\n  useEffect(() => {\n    // const bubble = pack()\n    // .size([diameter, diameter])\n    // .padding(1.5);\n\n    select(\"#bubbleChart\").selectAll(\"svg\").remove()\n    // bubbleRef.current.style.height = height + \"px\";\n    // bubbleRef.current.style.width  = width + \"px\";\n\n    const svg = select(\"#bubbleChart\").append(\"svg\")\n      .attr(\"width\", diameter)\n      .attr(\"height\", diameter/2)\n      .call(responsivefy)\n      .attr(\"class\", \"bubble\");\n\n    const root = hierarchy(classes(data))\n      .sum(function (d) { return d?.value; })\n      .sort(function (a, b) { return b?.value - a?.value; });\n    bubble(root);\n    const node = svg.selectAll(\".node\")\n      .data(root?.children)\n      .enter().append(\"g\")\n      .attr(\"class\", \"node\")\n      .attr(\"transform\", function (d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\n    node.append(\"title\")\n      .text(function (d) { return d?.data?.className + \": \" + format2(d?.value); });\n    node.append(\"circle\")\n      .attr(\"r\", function (d) { return d.r; })\n      .style(\"fill\", function (d) {\n        return color(d?.data?.packageName);\n      });\n    node.append(\"text\")\n      .attr(\"dy\", \".3em\")\n      .attr(\"text-anchor\", \"middle\")\n      .style('font-size', '11px')\n      .text(function (d) { return d?.data?.className?.substring(0, d?.r / 3); });\n\n    // select(self?.frameElement).style(\"height\", diameter + \"px\");\n\n    function responsivefy(svg) {\n      // get container + svg aspect ratio\n      const container = select(svg.node().parentNode),\n        width = parseInt(svg.style(\"width\")),\n        height = parseInt(svg.style(\"height\")),\n        aspect = width / height;\n\n      // add viewBox and preserveAspectRatio properties,\n      // and call resize so that svg resizes on inital page load\n      \n      // svg.attr(\"viewBox\", \"0 0 \" + width + \" \" + height)\n      svg.attr(\"viewBox\", \"0 0 \" + width + \" \" + 490)\n        .attr(\"perserveAspectRatio\", \"xMinYMid\")\n        .call(resize);\n\n      select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n      // get width of container and resize svg to fit it\n      function resize() {\n        const targetWidth = parseInt(container.style(\"width\"));\n        svg.attr(\"width\", targetWidth);\n        svg.attr(\"height\", Math.round(targetWidth / aspect));\n      }\n    }\n\n  }, [data?.children?.length >= 1])\n\n\n  return (\n    <>\n      {\n        <div className='col-lg-12 d-flex flex-column' >\n          <div\n            id='bubbleChart'\n            className='col-lg-12 d-flex mx-auto'\n            ref={bubbleRef}\n          >\n          </div>\n        </div>\n      }\n    </>\n  )\n}\n"],"names":["diameter","BubbleChart","_ref","_data$children","sourceData","_useState","useState","_useState2","_slicedToArray","data","setData","bubbleRef","useRef","useEffect","format2","format","color","scaleOrdinal","schemeCategory10","bubble","pack","size","padding","select","selectAll","remove","svg","append","attr","call","container","node","parentNode","width","parseInt","style","height","aspect","resize","targetWidth","Math","round","window","on","root","hierarchy","classes","recurse","name","children","forEach","child","push","packageName","className","value","sum","d","sort","a","b","enter","x","y","text","_d$data","r","_d$data2","_d$data3","_d$data3$className","substring","length","_jsx","_Fragment","id","ref"],"sourceRoot":""}